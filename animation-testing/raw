"use client";
// Snake.js
import React, { useEffect, useState } from "react";
import { motion, useAnimation } from "framer-motion";

const curveyPath =
  "M262.794 1C262.794 1 362.072 55.0621 262.794 109.423C163.516 163.784 184.575 212.47 262.794 241.741C341.013 271.012 382.954 318.204 262.794 368.384C142.634 418.563 262.794 501 262.794 501";

const Snake = () => {
  const [state, setState] = useState(100);
  return (
    <>
      <svg
        className="w-[1000px] block absolute"
        width="1000px"
        height=""
        version="1.1"
      >
        <motion.path
          fill="transparent"
          stroke="#888888"
          stroke-width="1"
          strokeDasharray={"5"}
          // d="M10 80 Q 77.5 10, 145 80 T 280 80"
          d={curveyPath}
          className="path"
        ></motion.path>
      </svg>
      <motion.div
        style={{
          offsetPath: `path('${curveyPath}')`,
        }}
        // key={state}
        animate={{
          offsetDistance: `${state}%`,
          transition: {
            duration: 2,
          },
        }}
        className="w-2 h-2 bg-red-500 rounded-full"
      ></motion.div>

      <div className="mt-[500px] absolute z-50">
        <button
          className="btn"
          onClick={() => {
            setState((p) => p - 25);
            console.log("here");
          }}
        >
          next
        </button>
        <button
          onClick={() => {
            setState((p) => p + 25);
            console.log("here");
          }}
          className="btn"
        >
          previous
        </button>
      </div>
    </>
  );
};

export default Snake;

const Path = ({ state }: any) => {
  return (
    <div id="svg-wrapper">
      <svg height="" className="w-[1000px] block absolute" version="1.1">
        <motion.path
          d={curveyPath}
          stroke-width="1"
          stroke="#888888"
          fill="transparent"
          strokeDasharray={"5"}
        ></motion.path>
      </svg>
      <Passenger state={state} />
    </div>
  );
};

const Passenger = ({ state }: any) => {
  return (
    <motion.div
      className="w-2 h-2 bg-red-500 rounded-full"
      style={{
        offsetPath: `path('${curveyPath}')`,
      }}
      animate={{
        offsetDistance: `${state}%`,
        transition: {
          duration: 2,
        },
      }}
    />
  );
};
